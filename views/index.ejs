<%-include('./partials/header') %> 
<%-include('./partials/navbar') %> 
</script>



<!-- hero slider section -->
<div class="container"  style="margin-top:5rem !important ;" >
    <div class="row my-5  align-items-center ">
        <div class="col-md-6 py-5" data-aos="zoom-in-up" data-aos-duration="600">
            <h1 class="display-2 text-primary hero-title dark-title ">
                A Place where Ideas Grows
            </h1>
            <p class="text-muted">
              The best ideas can change who we are.<i>dSocial</i> is where those ideas take shape, take off, and spark powerful conversations. Weâ€™re an open platform where over 100 million readers come to find insightful and dynamic thinking. 
            </p>
             <a href="/users/sign-up" class="btn btn-outline-primary  btn-lg">Join Us</a>
        </div>
        <div class="col-md-6  col-hide " data-aos="fade-right" data-aos-duration="1000">
            <div id="carouselExampleInterval" class="w-100  carousel carousel-dark slide h-100" data-bs-ride="carousel">
                <div class="carousel-inner px-2">
                  <div class="carousel-item active" data-bs-interval="10000">
                    <img  loading="lazy" src="/assets/hero_img1.svg" class="d-block w-100 " alt="dSocial-Social Blog">
                  </div>
                  <div class="carousel-item" data-bs-interval="2000">
                    <img loading="lazy" src="/assets/hero_img2.svg" class="d-block w-100" alt="dSocial-Social Blog">
                  </div>
                  <div class="carousel-item">
                    <img loading="lazy" src="/assets/hero_img3.svg" class="d-block w-100" alt="dSocial-Social Blog">
                  </div>
                </div>
                
              </div>
        </div>
    </div>
</div>

<!-- most recent posts section -->
<section class="bg-theme pb-4">
  <div class="container">
    <h2 class="dark-title section-title text-center b_bottom my-3 mt-3">Recent Posts</h2>
    <!-- if no posts then -->
<% if (recentPosts.length===0) { %>
    <h5>No Posts added Yet!</h5>
<% }else {%>
    <!-- show recent first post -->
    <div class="row">
      <div class="col-md-6" data-aos="fade-right" data-aos-duration="800"    data-aos-once="true" data-aos-delay="100">
        <div class="img-box rounded-img">
          <img loading="lazy" src="<%=recentPosts[0].coverImageUrl %>" alt="artile-title" class="post-img img-zoom">
        </div>
        <div class="content my-2">
          <a href="/posts/<%=recentPosts[0]._id%>" class="article-title">
            <h5><%=recentPosts[0].title %></h5>

          </a>
          <p class="post-content-wrapper">
            <%=recentPosts[0].content %>....
          </p>
          <small>
            By <%=recentPosts[0].author.name %> <%=(recentPosts[0].content.length* 0.004).toFixed(2) + 'min'%>  read
          </small>
          <br>
          <small class="text-muted">
          
            <i class="fa fa-calendar" aria-hidden="true"></i> <%= new Date(recentPosts[0].createdAt).toLocaleString()%>
          </small>
        </div>
      </div>
    <% if (recentPosts.length>1) { %>
        <div class="col-md-6" >
          <% for( let i = 1; i < recentPosts.length ;i++ ) { %>
            <div class="row my-2 align-items-start  data-aos="fade-up"
            data-aos-anchor-placement="center-bottom"   data-aos-duration="1000"  data-aos-once="true">
              <div class="col-sm-4 align-self-start"
            
              >
                
                <div class="img-box align-top">
                  <img loading="lazy" src="<%=recentPosts[i].coverImageUrl%>" alt="artile-title" class="post-img img-zoom align-top"">
                </div>
              </div>
              <div class="col-sm-8">
                <div class="content my-2">
                  <a href="/posts/<%=recentPosts[i]._id%>" class="article-title">
                    <h5><%=(recentPosts[i].title.length>31)?recentPosts[i].title.substring(0,31)+'...':recentPosts[i].title%></h5>
        
                  </a>
                  <p class="post-content-wrapper further-substr">
                    <%=recentPosts[i].content%>
                  </p>
                  <small>
                    By <%=recentPosts[i].author.name%> <%=(recentPosts[i].content.length* 0.004).toFixed(2) + 'min'%>  read
                  </small>
                  <br>
                  <small class="text-muted">
                  
                    <i class="fa fa-calendar" aria-hidden="true"></i> <%= new Date(recentPosts[i].createdAt).toLocaleString()%>
                  </small>
                </div>
              </div>
              
            
            </div>
          <% } %>
          
        </div>
      <% } else {%>
        <h5>No Posts added Yet!</h5>
        <% } %> 
      
    </div>
    <% } %> 
  </div>

</section>
<section class="container py-5">

  <!-- all posts here -->
  <div class="row">
    <div class="col-md-8">
      <p class="text-info mb-0 pb-0  secondary-title">
        All Posts
      </p>
      <hr class="mb-3  mt-1 stylish-line" style="height:0.1em" >
      <% if (allPosts.length===0) { %>
        <h5 class="text-muted">No Posts added Yet!</h5>
      <% }else{%>
              <% allPosts.forEach(post => { %>
                <div class="row my-3">
                  <div class="col-sm-8"
                  data-aos="fade-right"
                  data-aos-duration="1500"
                  data-aos-once="true"
                  >
                    <a href="/posts/<%=post._id%>" class="text-info article-title" >
                      <h5 class="text-dark"><%=post.title %></h5>
          
                    </a>
                    <p class="post-content-wrapper">
                      <%=post.content %>....
                    </p>
                    <small>
                      By <%=post.author.name %> <%=(post.content.length* 0.004).toFixed(2) + 'min'%>  read
                    </small>
                    <br>
                    <small class="text-muted">
                    
                      <i class="fa fa-calendar" aria-hidden="true"></i><%= new Date(post.createdAt).toLocaleString()%>
                    </small>
                  </div>
                  <div class="col-sm-4"
                  >
                    <div class="img-box">
                      <img loading="lazy" src="<%=post.coverImageUrl %>" alt="article-img" class="post-img">
                    </div>
                  </div>
                </div>
              <% }) %>
      <% }%>
     
    </div>
    <!-- popular posts -->
    <div class="col-md-4"
    data-aos="zoom-out-up" data-aos-duration="500" data-aos-easing="linear"  data-aos-once="true"

    >
      
      <%-include('./posts/popular_posts.ejs') %> 
       
    </div>
  </div>
</section>

<%-include('./partials/footer') %> 
<script src="/js/postContentScript.js"></script>

